{% extends "layout.html" %}

{% block title %}
    Dashboard - Results
{% endblock %}

{% block main %}
    
<h1>ROOM: {{ room.name }}</h1>
<h6>STATUS: {{ room.status }}</h6>
<h6>{{ message }}</h6>
{% if user_voted %}
    <div>
    <h4>This is your Vote!</h4>
        <table class="table">
            <thread>
                <tr>
                    <th scope="col">Option</th>
                    <th scope="col">Vote</th>
                </tr>
            </thread>
            {% for vote in user_votes %}
                <tbody>
                    <tr>
                        <th scope="row">{{ vote.options.name }}</th>
                        <td>{{ vote.vote }}</td>
                    </tr>
                </tbody>
            {% endfor %}
        </table>
    </div>
{% endif %}

{% if room_close %}
    <div>
    <h4>These are the Room Results!</h4>
        <table class="table">
            <thread>
                <tr>
                    <th scope="col">Option</th>
                    <th scope="col">Vote</th>
                </tr>
            </thread>
            {% for row in room_votes %}
                <tbody>
                    <tr>
                        <th scope="row">{{ row['option_name'] }}</th>
                        <td>{{ row['all_votes'] }}</td>
                    </tr>
                </tbody>
            {% endfor %}
        </table>
        <table class="table">
            <td>
                <center><divv id="piechart"></divv></center>
            </td>
        </table>
    </div>

{% endif %}



{% endblock %}